title,body,labels,assignees
EPIC: Physics Stabilization PS1.x — Numerical & Engine Stabilization,"Epic tracking all PS1.x work: softened gravity, integrator abstraction, kernel and run_sim refactors, and viewer-side stability tooling (auto-camera) that prepared the engine for later topology-aware physics.",PS,Done,steve
EPIC: Physics Stabilization PS2.x — Topology-Aware Physics & Spatial Systems,"Epic covering PS2.1–PS2.4: topology-aware distance engine, neighbor engine, spatial partitioning, torus and sphere validation fixes, topology parameter preservation, and final cross-topology stability verification.",PS,Done,steve
Repo initialization and Git setup,"Initialize the CosmoFrame / CosmoSim repository with a basic Python project layout, Git configuration, .gitignore for caches and outputs, and an outputs directory structure suitable for simulator artifacts.",Bootstrap,Architecture,Legacy,Done,steve
Initial Python package and module layout,"Create the core package structure for the engine (kernel, physics utilities, environment, scenarios, exporters, viewer stubs) to support incremental simulation and visualization development.",Bootstrap,Architecture,Engine,Done,steve
Early state and entity model definitions,"Define the initial UniverseConfig and UniverseState style structures including positions, velocities, masses, activity flags, and global parameters needed to run a minimal N-body simulation.",Bootstrap,Engine,Done,steve
Prototype simulation loop v0,"Implement a first-pass simulation loop that repeatedly computes forces, advances positions and velocities, and records basic outputs, sufficient for initial smoke tests and debugging.",Bootstrap,Engine,Done,steve
Prototype gravity and force computation routines,"Add early Newtonian gravity routines with direct Euclidean distances and naive pairwise loops to drive random N-body behavior before later refactors and softening.",Engine,Legacy,Done,steve
Prototype integrators before Leapfrog,"Experiment with simple Euler and semi-implicit update formulas to step positions and velocities, providing a baseline for later integrator abstraction work.",Engine,Legacy,Done,steve
CLI argument parser v0 for run_sim,"Introduce an initial argparse-based CLI around run_sim style entrypoints to select scenarios, step counts, and basic configuration values from the command line.",Bootstrap,Architecture,Done,steve
Scenario loader v0 and registry stub,"Implement a basic mapping from scenario names to builder functions, enabling selection of random N-body and simple test scenarios while keeping room for future discovery-based loading.",Bootstrap,Scenarios,Engine,Done,steve
Matplotlib static visualization v0,"Create simple matplotlib-based plotting functions that render particle positions into PNG images for single frames or short runs, enabling basic visual inspection of dynamics.",Visualization,Engine,Done,steve
Image exporter v0,"Wire the early simulation loop to write out PNG plots for each run, organizing them into an outputs directory and establishing the initial artifact pipeline.",Visualization,Engine,Done,steve
Early JSON or text data exporter,"Implement a minimal JSON or text exporter that dumps position and velocity arrays to disk to aid debugging and offline analysis before the more structured frame exporters were added.",Visualization,Engine,Legacy,Done,steve
Transition to JAX math backend,"Refactor core numerical routines to use JAX arrays and operations, enabling jit-compatible stepping and establishing the long-term performance model for the simulator.",Engine,Architecture,Done,steve
JAX-based initialization and RNG utilities,"Introduce JAX random key handling and helper utilities to generate reproducible initial conditions for random N-body and related scenarios.",Engine,Scenarios,Done,steve
Early debugging prints and configuration logging,"Add basic logging for scenario name, step counts, topology, and key configuration values to help validate early behavior and catch misconfigurations.",Bootstrap,Legacy,Done,steve
Initial README and roadmap draft,"Write the first README describing project goals, basic usage, and a rough roadmap for engine, topology, and visualization development to guide early work.",Bootstrap,Legacy,Done,steve
Legacy run_sim and jit_run_sim scripts,"Create standalone run_sim.py and jit_run_sim.py entrypoints that invoked the kernel directly for development before they were consolidated under cosmosim.py.",Bootstrap,Legacy,Done,steve
Kernel step loop abstraction,"Refactor the simulation logic into a reusable kernel step function that encapsulates force computation and integration, forming the backbone of all future scenarios.",Engine,Architecture,Done,steve
Velocity Verlet integrator v1 introduction,"Introduce a Velocity Verlet style integrator to improve stability and energy behavior compared to earlier Euler-like methods, laying groundwork for later PS phases.",Engine,Done,steve
Refactor of force computation pipeline,"Separate gravity computation into dedicated functions called from the kernel, improving readability and enabling later topology-aware distance handling.",Engine,Architecture,Done,steve
Kinetic and potential energy utilities,"Implement helper functions for kinetic and gravitational potential energy to support validation scenarios and energy drift diagnostics.",Engine,Diagnostics,Done,steve
Initial stability investigations and test runs,"Run small-scale scenarios to examine energy drift and orbit quality under the new integrator, documenting behaviors and identifying stabilization needs.",Engine,Diagnostics,Done,steve
Random N-body scenario implementation,"Create a random N-body scenario with configurable N, radius, and masses, integrated with JAX-based initialization and used as a primary testbed for the engine.",Scenarios,Engine,Done,steve
Two-body orbit scenario,"Implement a two-body orbit scenario with analytic-style initial conditions to validate closed orbits and integrator correctness over many periods.",Scenarios,Engine,Done,steve
Three-body basic scenario,"Add a simple three-body scenario to probe chaotic dynamics and to stress-test integrator stability under nontrivial gravitational interactions.",Scenarios,Engine,Done,steve
Scenario registry and discovery improvements,"Enhance the scenario registry so scenarios can be auto-discovered and referenced by short names or full module paths, easing CLI use and test coverage.",Scenarios,Architecture,Done,steve
CLI consolidation into cosmosim.py,"Consolidate multiple entrypoints into a single canonical CLI, cosmosim.py, adding unified argument parsing, scenario discovery, and a clear two-viewer architecture with debug, web, and none modes.",Architecture,E,Done,steve
Viewer routing and view mode selection,"Implement the --view flag (auto, debug, web, none) and routing logic in cosmosim.py so that simulations can target the Python debug viewer, JSON export for web, or headless batch execution.",Architecture,E,Visualization,Done,steve
Scenario discovery and listing via CLI,"Add dynamic discovery of scenarios under the scenarios package, support for short and fully qualified names, and a --list command to enumerate available scenarios.",Architecture,Scenarios,Done,steve
Legacy script deprecation and compatibility,"Mark run_sim.py and jit_run_sim.py as legacy while keeping them functional, updating documentation to direct users toward cosmosim.py for all modern workflows.",Architecture,Legacy,Done,steve
JSON frame exporter v1,"Implement a JSON exporter that serializes per-frame positions, velocities, masses, and activity flags into a structured dictionary suitable for web playback.",E,Visualization,Done,steve
Single-file JSON exporter for web viewer,"Add export_simulation_single to run a simulation and write configuration plus all frames into a single JSON file for the Three.js-based viewer.",E,Visualization,Done,steve
Frame dictionary helpers for export,"Create helper functions to convert internal state into plain Python dictionaries and lists, ensuring JSON-serializable output from JAX-based arrays.",E,Visualization,Done,steve
Unified CLI tests for cosmosim entrypoint,"Introduce CLI-focused tests that validate scenario discovery, view routing, parameter passing, and export flags under the new cosmosim.py entrypoint.",E,Diagnostics,Done,steve
PSS0.x CLI parameter string parsing,"Add a --params argument and a parse_param_string function that converts comma-separated key=value pairs into a dictionary for later schema-based interpretation.",PSS,Done,steve
PSS1.0 scenario schema format,"Define the SCENARIO_PARAMS schema structure for scenarios, including type, default, min, max, and description fields, starting with bulk_ring as a reference implementation.",PSS,Done,steve
PSS1.1 schema discovery and parameter merge,"Implement schema discovery and merge_params logic that loads SCENARIO_PARAMS, applies CLI overrides with type conversion, clamps values to bounds, and logs final merged parameters.",PSS,Done,steve
PSS integration into cosmosim workflow,"Wire PSS into cosmosim.py so scenarios receive merged_params when they accept a params argument, with full backward compatibility for scenarios that do not use PSS.",PSS,Architecture,Done,steve
PSS1.2 validation layer,"Extend PSS with a robust validation layer that enforces type checking, bounds constraints, allowed value lists, required parameters, and emits structured [PSS WARNING] messages for invalid inputs.",PSS,Done,steve
PSS schema validation utilities,"Add a validate_schema helper that checks SCENARIO_PARAMS definitions for inconsistent defaults, invalid types, and min/max inversions to catch schema errors early.",PSS,Diagnostics,Done,steve
PSS test suite for parsing and merging,"Create a dedicated PSS test file exercising parsing, schema loading, type conversion, bounds clamping, unknown parameter handling, and integration with cosmosim.",PSS,Diagnostics,Done,steve
PSS validation tests for edge cases,"Add additional tests focused on the validation layer, including invalid booleans, bad numeric inputs, missing required parameters, and allowed list enforcement.",PSS,Diagnostics,Done,steve
Test suite update for CLI and run_sim transformation,"Update tests to reflect run_sim.py and jit_run_sim.py becoming CLI tools, remove them from scenario interface tests, and introduce a new CLI-focused test file covering help, auto-naming, and configurations.",Architecture,Legacy,Done,steve
JAX-friendly mocking strategy in tests,"Fix JAX string tracing issues by patching step_simulation in each module namespace instead of kernel, ensuring CLI and interface tests run safely in non-jit mode.",Engine,Diagnostics,Done,steve
Interactive Python viewer implementation (E1.1/E1.2),"Implement a Matplotlib-based interactive viewer (viewer/viewer.py) with real-time rendering, playback controls, color modes, radius modes, and overlay hooks, replacing static plotting for development.",E,Visualization,Done,steve
Viewer overlay system for HUD, inspector, vectors, trajectories,"Create modular overlays for debug HUD, entity inspector, velocity vectors, and trajectory trails, all toggleable via keyboard, to support rich interactive debugging.",E,Visualization,Done,steve
UniverseState extension with entity_radius,"Add an entity_radius field to UniverseState and initialize it in state initialization so the viewer can render size-scaled entities.",Engine,E,Done,steve
Viewer integration tests for interactive controls,"Add tests that validate viewer initialization, step loop behavior, pause/resume, step-forward, entity selection, and inspector auto-show in headless test environments.",E,Diagnostics,Done,steve
Diagnostics and metrics panel for Python viewer (E1.3),"Implement a MetricsEngine and diagnostics panel that compute and visualize energy, momentum, center of mass, velocity histograms, and substrate diagnostics in a non-blocking secondary figure.",E,Diagnostics,Done,steve
Metrics history management and throttled rendering,"Add capped history buffers, frame-index based synchronization, and throttled updates (every N frames) so diagnostics plots remain performant and aligned with the simulation.",E,Diagnostics,Done,steve
Diagnostics metrics test suite,"Introduce a metrics-focused test file validating metric computation, history pruning, missing-data behavior, toggling, and integration with viewer frame updates.",E,Diagnostics,Done,steve
Web viewer scenario configuration panel (E1.4),"Implement a dynamic scenario configuration panel in the web viewer that builds forms from JS-side scenario schemas, supports typed fields, and generates cosmosim.py commands for copy-paste.",E,Visualization,Done,steve
ScenarioConfigUI and schema registry in web viewer,"Create ScenarioSchemas and a ScenarioConfigUI class that populate scenario dropdowns, render parameter inputs, and update a live CLI command preview with copy-to-clipboard support.",E,Visualization,Done,steve
Python viewer parameter readout panel (E1.5),"Add a parameter panel in the Python viewer that shows scenario name, topology type, UniverseConfig values, merged PSS parameters, engine flags, and progress, toggleable via Shift+P.",E,Visualization,Done,steve
ParameterPanel implementation and throttled updates,"Implement ParameterPanel with Matplotlib text rendering, non-blocking draw_idle calls, fixed figure region, and throttled updates to avoid impacting frame rate.",E,Diagnostics,Done,steve
Viewer parameter panel tests,"Add tests for parameter panel initialization, update behavior, visibility toggling, robustness with partial data, and integration with the viewer render loop.",E,Diagnostics,Done,steve
Topology overlay system base package,"Create a topology_overlay package with base, grid, bounds, curvature, and factory modules providing a generic TopologyOverlay base class and overlay factory.",Visualization,E,Done,steve
Grid overlay implementation,"Implement a GridOverlay that generates grid line geometry scaled to simulation bounds, supporting configurable divisions, color, opacity, and 2D or 3D layouts for use by the web viewer.",Visualization,E,Done,steve
Bounds overlay implementation,"Implement a BoundsOverlay that emits line segments for simulation boundaries (square or cube), providing a clear visual indication of domain limits in exported frames.",Visualization,E,Done,steve
Topology overlay factory and integration hooks,"Add a factory function get_topology that returns overlay instances by name and define export-time hooks so topology overlays can be attached to frame JSON for web rendering.",Visualization,E,Done,steve
Topology overlay tests,"Create tests that validate grid and bounds overlay output structure, JSON-serializable formats, correct line counts for sample configs, and null behavior when overlay is disabled.",Visualization,E,Diagnostics,Done,steve
Softened gravity implementation (PS1.1),"Introduce a physics_utils module with compute_gravity_forces implementing softened gravity so that forces remain finite at small separations while preserving backward-compatible behavior.",PS,Engine,Done,steve
Gravity_softening parameter in config,"Add a gravity_softening parameter to UniverseConfig to control the softening length and enable tuning of close-range force behavior per simulation.",PS,Engine,Done,steve
Kernel and run_sim refactor to use compute_gravity_forces,"Remove duplicate inline gravity code from kernel and run_sim and replace it with calls to compute_gravity_forces, eliminating duplication and centralizing force logic.",PS,Engine,Done,steve
Softened gravity test suite,"Create tests verifying finite forces at small separations, epsilon effects on force magnitude, backward compatibility with small softening, inert behavior for inactive particles, and Newton's third law symmetry.",PS,Diagnostics,Done,steve
Integrator abstraction (PS1.2),"Introduce integrate_euler and integrate_leapfrog functions in physics_utils and route integration in kernel and run_sim through a config-selected integrator.",PS,Engine,Done,steve
Integrator selection via UniverseConfig,"Add an integrator field to UniverseConfig (euler or leapfrog) and ensure the engine chooses the correct integrator while defaulting to the preexisting Euler behavior.",PS,Engine,Done,steve
Integrator test suite for Euler and Leapfrog,"Add tests that confirm default integrator selection, finite results, alignment of Euler with previous behavior, stability of Leapfrog in simple systems, and correct handling of inactive particles.",PS,Diagnostics,Done,steve
Auto-camera system for web viewer (PS1.5),"Implement an auto-camera system in viewer/autoCamera.js that computes bounding spheres for particles and smoothly adjusts camera position and distance to keep simulations in view.",PS,E,Done,steve
Auto-camera UI controls and reset,"Add auto-camera toggle checkbox, a reset camera button, and a keyboard shortcut C in the web viewer, wiring them to resetCamera and updateCameraView to manage default framing.",PS,E,Visualization,Done,steve
Auto-camera integration and manual verification,"Integrate auto-camera into the Three.js animation loop, test behavior on expanding universes and edge cases (empty frames, single entity, extreme radii), and confirm no significant FPS impact.",PS,Diagnostics,E,Done,steve
Distance utilities module for topology-aware offsets (PS2.1),"Create distance_utils with compute_offset and compute_distance that respect FLAT, TORUS, SPHERE, and BUBBLE topologies, replacing ad hoc Euclidean operations.",PS,Engine,Done,steve
Topology configuration fields for torus and bubble (PS2.1),"Extend UniverseConfig with torus_size and bubble_curvature fields so the distance engine can derive correct periodic and curved metrics.",PS,Engine,Done,steve
Hybrid flat vs topology-aware gravity path (PS2.1),"Modify compute_gravity_forces to use a fast vectorized Euclidean path for flat topology and a vmap-based topology-aware path for non-flat topologies, preserving flat performance.",PS,Engine,Done,steve
Distance utilities test suite,"Add tests for flat offsets and distances, torus wrapping behavior, sphere geodesic distances and antipodal cases, and bubble curvature metrics, ensuring correctness across topologies.",PS,Diagnostics,Done,steve
Topology neighbor engine module (PS2.2),"Implement environment/topology_neighbors.py with compute_topology_offset and generate_neighbor_pairs, providing a centralized topology-aware neighbor iteration engine with support for all topologies.",PS,Engine,Done,steve
Neighbor engine feature flag in config (PS2.2),"Add an enable_neighbor_engine flag to UniverseConfig and conditionally route compute_gravity_forces through the neighbor engine when enabled, keeping it off by default for JAX compatibility.",PS,Engine,Done,steve
Topology neighbor engine tests,"Create tests for topology_neighbors that validate offsets across flat, torus, sphere, and bubble, neighbor pair generation properties, and equivalence with legacy pair enumeration in non-jit contexts.",PS,Diagnostics,Done,steve
Spatial partitioning engine module (PS2.3),"Implement environment/spatial_partition.py with compute_cell_index, build_spatial_grid, and get_neighbor_cells to support hash-grid-based neighbor search and reduce complexity from O(N^2) to O(N) in suitable cases.",PS,Engine,Done,steve
Partitioned neighbor pair generation (PS2.3),"Extend topology_neighbors with generate_partitioned_pairs that uses the spatial grid to restrict neighbor search to nearby cells while preserving deterministic pair ordering and symmetry.",PS,Engine,Done,steve
Spatial partition configuration flags (PS2.3),"Add enable_spatial_partition and spatial_cell_size fields to UniverseConfig, defaulting to disabled and auto cell size derived from radius, to gate use of spatial partitioning.",PS,Engine,Done,steve
Spatial partitioning tests and fallback behavior,"Introduce tests that verify correct grid building, torus wrapping, no duplicate or self-pairs, equivalence with non-partitioned neighbor sets, determinism, and graceful fallback when partitioning fails under JAX.",PS,Diagnostics,Done,steve
Torus topology NaN bug fix (PS2.4),"Fix NaN generation in torus wrapping by deriving consistent effective bounds from torus_size or radius, validating positive widths, and ensuring validation_torus_wrap runs without numerical blowups.",PS,Diagnostics,Done,steve
Sphere geodesic constraint projection (PS2.4),"Add an enforce_sphere_constraint flag and a sphere constraint function that projects positions back to a fixed radius and velocities onto the tangent plane after integration to maintain geodesic motion.",PS,Engine,Done,steve
Sphere geodesic stability validation (PS2.4),"Update validation_sphere_geodesic to enable the constraint and confirm stable radii and energy with drift reduced to below 1 percent over long runs.",PS,Diagnostics,Done,steve
Topology type parameter merging fix (PS2.4),"Ensure that scenario-defined DEFAULT_TOPOLOGY_TYPE overrides schema defaults in merged_params and that build_config always receives merged parameters, preserving intended topology for scenarios like validation_sphere_geodesic.",PSS,PS,Done,steve
Topology constants and branches alignment (PS2.4),"Define explicit topology constants for FLAT, TORUS, SPHERE, and BUBBLE and align topology handler branch lists so that sphere dispatches correctly for distance and constraint operations.",PS,Engine,Done,steve
Test compatibility fixes for export_simulation_single (PS2.4),"Adjust tests to mock kernel.step_simulation, JSON dumping, and file IO so export_simulation_single can run under tests without JAX failures or MagicMock serialization issues.",PS,E,Diagnostics,Done,steve
Topology_type coercion for MagicMock tests (PS2.4),"Coerce topology_type to int with a safe fallback in topology math utilities to prevent recursion or tracing errors when tests pass MagicMock or invalid types.",PS,Diagnostics,Done,steve
Comprehensive PS2.4 validation suite completion,"Verify torus, sphere, topology parameter merging, and test compatibility fixes together, achieving a fully passing test suite and stable behavior across all supported topologies.",PS,Diagnostics,Done,steve
README refinement for walkthrough-based documentation,"Update README and walkthrough index to reference physics stabilization, topology overlay, PSS, and interface enhancement walkthroughs as proof-of-work documentation for the project.",Bootstrap,Legacy,Done,steve
CosmoSim walkthrough index creation,"Create a consolidated index of major walkthrough documents (PS1.x, topology overlay, test suite updates) to serve as onboarding and historical record for the CosmoFrame project.",Bootstrap,Legacy,Done,steve
